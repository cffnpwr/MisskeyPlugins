/// @ 0.16.0
### {
  id: "0b7711e8-dc48-47c5-9d70-dc9d8d6880e3"
  name: "字体変換プラグイン"
  version: "1.0.0"
  author: "elysion"
  description: "字体を変換するボタンを投稿メニューに追加します"
  config: {
    SERIF_B_enable: {
      type: "boolean"
      label: "セリフ(太字): 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    SERIF_B_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：セリフ(太字)(𝐒𝐚𝐦𝐩𝐥𝐞 𝐓𝐞𝐱𝐭 𝟎𝟏)"
    }
    SERIF_I_enable: {
      type: "boolean"
      label: "セリフ(イタリック): 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    SERIF_I_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：セリフ(イタリック)(𝑆𝑎𝑚𝑝𝑙𝑒 𝑇𝑒𝑥𝑡 01)"
    }
    SERIF_I_B_enable: {
      type: "boolean"
      label: "セリフ(イタリック太字): 無効/有効"
      description: "メニューに表示するかどうか"
      default: true
    }
    SERIF_I_B_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：セリフ(イタリック太字)(𝑺𝒂𝒎𝒑𝒍𝒆 𝑻𝒆𝒙𝒕 01)"
    }
    SANS_enable: {
      type: "boolean"
      label: "サンセリフ: 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    SANS_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：サンセリフ(𝖲𝖺𝗆𝗉𝗅𝖾 𝖳𝖾𝗑𝗍 𝟢𝟣)"
    }
    SANS_B_enable: {
      type: "boolean"
      label: "サンセリフ(太字): 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    SANS_B_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：サンセリフ(太字)(𝗦𝗮𝗺𝗽𝗹𝗲 𝗧𝗲𝘅𝘁 𝟬𝟭)"
    }
    SANS_I_enable: {
      type: "boolean"
      label: "サンセリフ(イタリック): 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    SANS_I_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：サンセリフ(イタリック)(𝘚𝘢𝘮𝘱𝘭𝘦 𝘛𝘦𝘹𝘵 01)"
    }
    SANS_I_B_enable: {
      type: "boolean"
      label: "サンセリフ(イタリック太字): 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    SANS_I_B_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：サンセリフ(イタリック太字)(𝙎𝙖𝙢𝙥𝙡𝙚 𝙏𝙚𝙭𝙩 01)"
    }
    MONOSPACE_enable: {
      type: "boolean"
      label: "等幅: 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    MONOSPACE_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：等幅(𝚂𝚊𝚖𝚙𝚕𝚎 𝚃𝚎𝚡𝚝 𝟶𝟷)"
    }
    BUBBLE_enable: {
      type: "boolean"
      label: "丸囲み: 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    BUBBLE_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：丸囲み(Ⓢⓐⓜⓟⓛⓔ Ⓣⓔⓧⓣ ⓪①)"
    }
    SQUARE_enable: {
      type: "boolean"
      label: "四角囲み: 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    SQUARE_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：四角囲み(🅂🄰🄼🄿🄻🄴 🅃🄴🅇🅃 01)"
    }
    BLACK_BUBBLE_enable: {
      type: "boolean"
      label: "黒丸囲み: 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    BLACK_BUBBLE_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：黒丸囲み(🅢🅐🅜🅟🅛🅔 🅣🅔🅧🅣 ⓿➊)"
    }
    BLACK_SQUARE_enable: {
      type: "boolean"
      label: "黒四角囲み: 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    BLACK_SQUARE_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：黒四角囲み(🆂🅰🅼🅿🅻🅴 🆃🅴🆇🆃 01)"
    }
    MINI_enable: {
      type: "boolean"
      label: "上付き文字: 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    MINI_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：上付き文字(ˢᵃᵐᵖˡᵉ ᵀᵉˣᵗ ⁰¹)"
    }
    DOUBLE_enable: {
      type: "boolean"
      label: "黒板文字: 無効/有効"
      description: "メニューに表示するかどうか"
      default: true
    }
    DOUBLE_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：黒板文字(𝕊𝕒𝕞𝕡𝕝𝕖 𝕋𝕖𝕩𝕥 𝟘𝟙)"
    }
    SCRIPT_enable: {
      type: "boolean"
      label: "スクリプト: 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    SCRIPT_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：スクリプト(𝒮𝒶𝓂𝓅𝓁ℯ 𝒯ℯ𝓍𝓉 01)"
    }
    SCRIPT_B_enable: {
      type: "boolean"
      label: "スクリプト(太字): 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    SCRIPT_B_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：スクリプト(太字)(𝓢𝓪𝓶𝓹𝓵𝓮 𝓣𝓮𝔁𝓽 01)"
    }
    FRAKTUR_enable: {
      type: "boolean"
      label: "フラクトゥール: 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    FRAKTUR_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：フラクトゥール(𝔖𝔞𝔪𝔭𝔩𝔢 𝔗𝔢𝔵𝔱 01)"
    }
    FRAKTUR_B_enable: {
      type: "boolean"
      label: "フラクトゥール(太字): 無効/有効"
      description: "メニューに表示するかどうか"
      default: false
    }
    FRAKTUR_B_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：フラクトゥール(太字)(𝕾𝖆𝖒𝖕𝖑𝖊 𝕿𝖊𝖝𝖙 01)"
    }
    HETA_enable: {
      type: "boolean"
      label: "へた文字(日本語対応): 無効/有効"
      description: "メニューに表示するかどうか"
      default: true
    }
    HETA_name: {
      type: "string"
      label: "表示名"
      description: "メニューでの表示名"
      default: "変換：へた文字(꠹ᨡⰿᱞ႑ꫀ  Ⲧꫀᳳʈ ០ꛨ क॑ᄓᑑ讠ᤊ)"
    }
  }
}

// pagesのjsonデータ読み込み
// https://msk.kitazawa.me/@elysion/pages/font_data
let FONT_LIST = eval {
  let pages_data = Mk:api("pages/show", {
    name: "font_data"
    username: "elysion"
  })
  let content = pages_data.content[0]
  let raw_text = content.text

  Json:parse(raw_text)
}

let CONFIG_DATA = [
  {font: "SERIF_B", enable: Plugin:config.SERIF_B_enable, name: Plugin:config.SERIF_B_name},
  {font: "SERIF_I", enable: Plugin:config.SERIF_I_enable, name: Plugin:config.SERIF_I_name},
  {font: "SERIF_I_B", enable: Plugin:config.SERIF_I_B_enable, name: Plugin:config.SERIF_I_B_name},
  {font: "SANS", enable: Plugin:config.SANS_enable, name: Plugin:config.SANS_name},
  {font: "SANS_B", enable: Plugin:config.SANS_B_enable, name: Plugin:config.SANS_B_name},
  {font: "SANS_I", enable: Plugin:config.SANS_I_enable, name: Plugin:config.SANS_I_name},
  {font: "SANS_I_B", enable: Plugin:config.SANS_I_B_enable, name: Plugin:config.SANS_I_B_name},
  {font: "MONOSPACE", enable: Plugin:config.MONOSPACE_enable, name: Plugin:config.MONOSPACE_name},
  {font: "BUBBLE", enable: Plugin:config.BUBBLE_enable, name: Plugin:config.BUBBLE_name},
  {font: "SQUARE", enable: Plugin:config.SQUARE_enable, name: Plugin:config.SQUARE_name},
  {font: "BLACK_BUBBLE", enable: Plugin:config.BLACK_BUBBLE_enable, name: Plugin:config.BLACK_BUBBLE_name},
  {font: "BLACK_SQUARE", enable: Plugin:config.BLACK_SQUARE_enable, name: Plugin:config.BLACK_SQUARE_name},
  {font: "MINI", enable: Plugin:config.MINI_enable, name: Plugin:config.MINI_name},
  {font: "DOUBLE", enable: Plugin:config.DOUBLE_enable, name: Plugin:config.DOUBLE_name},
  {font: "SCRIPT", enable: Plugin:config.SCRIPT_enable, name: Plugin:config.SCRIPT_name},
  {font: "SCRIPT_B", enable: Plugin:config.SCRIPT_B_enable, name: Plugin:config.SCRIPT_B_name},
  {font: "FRAKTUR", enable: Plugin:config.FRAKTUR_enable, name: Plugin:config.FRAKTUR_name},
  {font: "FRAKTUR_B", enable: Plugin:config.FRAKTUR_B_enable, name: Plugin:config.FRAKTUR_B_name},
  {font: "HETA", enable: Plugin:config.HETA_enable, name: Plugin:config.HETA_name}
]

each (let data, CONFIG_DATA) {
  if (data.enable == true) {
    Plugin:register_post_form_action(data.name, @(form, update) {
      var text = form.text
      each (let font, FONT_LIST[data.font]) {
        text = text.replace(font[0], font[1])
      }
      update("text", text)
    })
  }
}