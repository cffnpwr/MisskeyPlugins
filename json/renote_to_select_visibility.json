{
  "type": "plugin",
  "data": "/// @ 0.16.0\n### {\n  id: \"dc00bf59-27c9-8e1b-1bba-93ae1ef8e992\"\n  name: \"指定の公開範囲にリノートするプラグイン\"\n  version: \"1.0.0\"\n  author: \"elysion\"\n  description: \"ノートメニューに【リノート：指定の公開範囲】を追加します。\"\n  permissions: [\"write:notes\"]\n  config: {\n    visibility: {\n      type: \"string\"\n      label: \"公開範囲\"\n      description: \"(既定値: auto) 以下から、投稿するノートの公開範囲を指定します。 auto public home followers\"\n      default: \"auto\"\n    }\n  }\n}\n\nlet c = {\n  visibility: Plugin:config.visibility,\n  auto: false\n}\nif (![\"auto\", \"public\", \"home\", \"followers\"].incl(c.visibility)) {\n  c.visibility = \"auto\"\n  Mk:dialog(Plugin:name, [\n    `公開範囲の指定に誤りがあります。`\n    `自動で **{c.visibility}** が適用されます。`\n  ].join(Str:lf), \"warning\")\n}\nc.auto = (c.visibility == \"auto\")\n\nPlugin:register_note_action(`リノート：{c.visibility}` @(note) {\n  let renote_obj = {\n    renoteId: note.id,\n    visibility: note.visibility\n  }\n\n  if !c.auto {\n    renote_obj.visibility = c.visibility\n  }\n\n  Mk:api(\"notes/create\", renote_obj)\n})"
}