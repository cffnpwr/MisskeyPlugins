{
  "type": "plugin",
  "data": "/// @ 0.16.0\n### {\n  id: \"2f8c02e8-2e8c-dca0-f4cd-ea302fdafbb2\"\n  name: \"MFM挿入ボタンを追加するプラグイン\"\n  version: \"2.0.0\"\n  author: \"elysion\"\n  description: \"投稿メニューに各【挿入：MFM】を追加します。\"\n  config: {\n    x2_enable: {\n      type: \"boolean\"\n      label: \"大きく(x2): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: true\n    }\n    x2_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：大きく(x2)\"\n    }\n    x2_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(x2) 以下から、サイズ変更が可能。 x2,x3,x4\"\n      default: \"x2\"\n    }\n    position_enable: {\n      type: \"boolean\"\n      label: \"位置(position): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    position_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：位置(position)\"\n    }\n    position_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(position.x=0,y=0)\"\n      default: \"position.x=0,y=0\"\n    }\n    scale_enable: {\n      type: \"boolean\"\n      label: \"拡大(scale): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    scale_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：拡大(scale)\"\n    }\n    scale_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(scale.x=1,y=1)\"\n      default: \"scale.x=1,y=1\"\n    }\n    rotate_enable: {\n      type: \"boolean\"\n      label: \"回転(rotate): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    rotate_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：回転(rotate)\"\n    }\n    rotate_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(rotate.deg=0)\"\n      default: \"rotate.deg=0\"\n    }\n    flip_enable: {\n      type: \"boolean\"\n      label: \"反転(flip): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    flip_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：反転(flip)\"\n    }\n    flip_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(flip) 以下から反転方向指定可能。 flip, flip.v, flip.h, flip.v,alternate, flip.h,alternate\"\n      default: \"flip\"\n    }\n    bg_enable: {\n      type: \"boolean\"\n      label: \"背景色(bg): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    bg_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：背景色(bg)\"\n    }\n    bg_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(bg.color=0f0)\"\n      default: \"bg.color=0f0\"\n    }\n    fg_enable: {\n      type: \"boolean\"\n      label: \"文字色(fg): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    fg_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：文字色(fg)\"\n    }\n    fg_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(fg.color=ff0000) f00等でも指定可能\"\n      default: \"fg.color=ff0000\"\n    }\n    rainbow_enable: {\n      type: \"boolean\"\n      label: \"虹(rainbow): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    rainbow_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：虹(rainbow)\"\n    }\n    rainbow_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(rainbow) bgやfg等組合せ可能。 $[fg.color=f00 $[rainbow レインボー]]\"\n      default: \"rainbow\"\n    }\n    sparkle_enable: {\n      type: \"boolean\"\n      label: \"キラキラ(sparkle): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    sparkle_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：キラキラ(sparkle)\"\n    }\n    sparkle_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(sparkle)\"\n      default: \"sparkle\"\n    }\n    blur_enable: {\n      type: \"boolean\"\n      label: \"ぼかし(blur): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    blur_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：ぼかし(blur)\"\n    }\n    blur_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(blur)\"\n      default: \"blur\"\n    }\n    bold_enable: {\n      type: \"boolean\"\n      label: \"太字(bold): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    bold_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：太字(bold)\"\n    }\n    bold_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(**) **さんまぶり**\"\n      default: \"**\"\n    }\n    italic_enable: {\n      type: \"boolean\"\n      label: \"斜体(italic): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    italic_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：斜体(italic)\"\n    }\n    italic_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(i) <i>さんまぶり</i>\"\n      default: \"i\"\n    }\n    strikethrough_enable: {\n      type: \"boolean\"\n      label: \"取り消し線(strikethrough): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    strikethrough_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：取り消し線\"\n    }\n    strikethrough_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(~~) ~~さんまぶり~~\"\n      default: \"~~\"\n    }\n    small_enable: {\n      type: \"boolean\"\n      label: \"目立たなくする(small): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    small_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：目立たなくする(small)\"\n    }\n    small_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(small) <small>さんまぶり</small>\"\n      default: \"small\"\n    }\n    center_enable: {\n      type: \"boolean\"\n      label: \"中央揃え(center): 無効/有効\"\n      description: \"メニューにcenterを表示するかどうか\"\n      default: false\n    }\n    center_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：中央揃え(center)\"\n    }\n    center_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(center) <center>さんまぶり</center>\"\n      default: \"center\"\n    }\n    plain_enable: {\n      type: \"boolean\"\n      label: \"プレーン(plain): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    plain_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：プレーン(plain)\"\n    }\n    plain_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(plain) <plain><i>**さんまぶり**</i></plain>\"\n      default: \"plain\"\n    }\n    quote_enable: {\n      type: \"boolean\"\n      label: \"引用(quote): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    quote_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：引用(quote)\"\n    }\n    quote_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(>) > さんまぶり\"\n      default: \">\"\n    }\n    inlinecode_enable: {\n      type: \"boolean\"\n      label: \"コード(インライン): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    inlinecode_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：コード（インライン）\"\n    }\n    inlinecode_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(`) `<: Hello, world!`\"\n      default: \"`\"\n    }\n    codeblock_enable: {\n      type: \"boolean\"\n      label: \"コードブロック(codeblock): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: false\n    }\n    codeblock_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"挿入：コードブロック\"\n    }\n    codeblock_arg: {\n      type: \"string\"\n      label: \"MFM\"\n      description: \"既定値(```) ```codeblock```\"\n      default: \"```\"\n    }\n    clear_enable: {\n      type: \"boolean\"\n      label: \"全消し(clear): 無効/有効\"\n      description: \"メニューに表示するかどうか\"\n      default: true\n    }\n    clear_name: {\n      type: \"string\"\n      label: \"表示名\"\n      description: \"メニューでの表示名\"\n      default: \"全消し\"\n    }\n    clear_arg: {\n      type: \"string\"\n      label: \"command\"\n      description: \"既定値(clear) 変更不可\"\n      default: \"clear\"\n    }\n    clear_dialog_enable: {\n      type: \"boolean\"\n      label: \"全消し時の確認ダイアログ: 無効/有効\"\n      description: \"全消し時の確認ダイアログを表示するかどうか\"\n      default: true\n    }\n  }\n}\n\nlet CONFIG_DATA = [\n  {enable: Plugin:config.x2_enable, name: Plugin:config.x2_name, arg: Plugin:config.x2_arg},\n  {enable: Plugin:config.position_enable, name: Plugin:config.position_name, arg: Plugin:config.position_arg},\n  {enable: Plugin:config.scale_enable, name: Plugin:config.scale_name, arg: Plugin:config.scale_arg},\n  {enable: Plugin:config.rotate_enable, name: Plugin:config.rotate_name, arg: Plugin:config.rotate_arg},\n  {enable: Plugin:config.flip_enable, name: Plugin:config.flip_name, arg: Plugin:config.flip_arg},\n  {enable: Plugin:config.bg_enable, name: Plugin:config.bg_name, arg: Plugin:config.bg_arg},\n  {enable: Plugin:config.fg_enable, name: Plugin:config.fg_name, arg: Plugin:config.fg_arg},\n  {enable: Plugin:config.rainbow_enable, name: Plugin:config.rainbow_name, arg: Plugin:config.rainbow_arg},\n  {enable: Plugin:config.sparkle_enable, name: Plugin:config.sparkle_name, arg: Plugin:config.sparkle_arg},\n  {enable: Plugin:config.blur_enable, name: Plugin:config.blur_name, arg: Plugin:config.blur_arg},\n  {enable: Plugin:config.bold_enable, name: Plugin:config.bold_name, arg: Plugin:config.bold_arg},\n  {enable: Plugin:config.italic_enable, name: Plugin:config.italic_name, arg: Plugin:config.italic_arg},\n  {enable: Plugin:config.strikethrough_enable, name: Plugin:config.strikethrough_name, arg: Plugin:config.strikethrough_arg},\n  {enable: Plugin:config.small_enable, name: Plugin:config.small_name, arg: Plugin:config.small_arg},\n  {enable: Plugin:config.center_enable, name: Plugin:config.center_name, arg: Plugin:config.center_arg},\n  {enable: Plugin:config.plain_enable, name: Plugin:config.plain_name, arg: Plugin:config.plain_arg},\n  {enable: Plugin:config.quote_enable, name: Plugin:config.quote_name, arg: Plugin:config.quote_arg},\n  {enable: Plugin:config.inlinecode_enable, name: Plugin:config.inlinecode_name, arg: Plugin:config.inlinecode_arg},\n  {enable: Plugin:config.codeblock_enable, name: Plugin:config.codeblock_name, arg: Plugin:config.codeblock_arg},\n  {enable: Plugin:config.clear_enable, name: Plugin:config.clear_name, arg: Plugin:config.clear_arg}\n]\n\neach (let data, CONFIG_DATA) {\n  if (data.enable == true) {\n    Plugin:register_post_form_action(data.name, @(form, update) {\n      var text = \"\"\n      match true {\n        (data.arg == \"**\" || data.arg == \"~~\" || data.arg == \"`\") => {\n          text = `{data.arg}{form.text}{data.arg}`\n        }\n        (data.arg == \"i\" || data.arg == \"center\" || data.arg == \"small\" || data.arg == \"plain\") => {\n          text = `<{data.arg}>{Str:lf}{form.text}{Str:lf}</{data.arg}>`\n        }\n        (data.arg == \"```\") => {\n          text = `{data.arg}{Str:lf}{form.text}{Str:lf}{data.arg}`\n        }\n        (data.arg == \">\") => {\n          let textArray = form.text.split(Str:lf)\n          let lines = []\n          each (let array, textArray) {\n            lines.push(`{data.arg} {array}`)\n          }\n          text = lines.join(Str:lf)\n        }\n        (data.arg == \"clear\") => {\n          if (Plugin:config.clear_dialog_enable) {\n            if (Mk:confirm(\"確認\", \"入力内容を空にします。\", \"warn\")) {\n              text = \"\"\n            } else {\n              return null\n            }\n          } else {\n            text = \"\"\n          }\n        }\n        * => {\n          text = `$[{data.arg} {form.text}]`\n        }\n      }\n      update(\"text\", text)\n    })\n  }\n}"
}
